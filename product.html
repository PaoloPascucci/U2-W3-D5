<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Dettagli Prodotto</title>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
            crossorigin="anonymous">       
            <link rel="stylesheet" href="./assets/style.css">
    </head>
    <body>
        <header class="m-3 d-flex justify-content-between">
            <div style="width: 156px;"></div>
            <h1>Pagina Prodotto </h1>
            <a class="btn btn-outline-primary my-3 BO" href="./homepage.html">Torna alla home</a>
        </header>
        <div class="container">
            <div class="row text-center justify-content-center g-3">

            </div>
            <script
                src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
                integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
                crossorigin="anonymous"></script>
            <script
                src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
                integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
                crossorigin="anonymous"></script>
            <script>
            window.onload = function () { 
                const prod = document.querySelector(".row")               
                const urlParams = new URLSearchParams(window.location.search)
                const id =  urlParams.get('id');
                fetch("https://striveschool-api.herokuapp.com/api/product/" +id, {
                    headers: {
                        Authorization:
                        "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2NTRkZTdlMzI1NGU4ODAwMTgzZjE4NzAiLCJpYXQiOjE2OTk2MDQ0NTEsImV4cCI6MTcwMDgxNDA1MX0.Fso8KUf_Ei74-It5EYnLN8VbbQYbmhJOHaAJ-nMV2sc",
                    },
                }).then(resp => resp.json()).then(product=>{
                    console.log(product);
                    prod.innerHTML = `
                    <h2>${product.name}</h2>    
                        <img class="w-25 rounded-4" src="${product.imageUrl}" alt="${product.description}">
                <p class="description">${product.description}</p>
                <span class="fw-bold">${product.price} â‚¬</span>
                <span class="d-inline-block w-25">Creato: ${product.createdAt}</span>
                <span class="d-inline-block w-50">Numero: ${product._id}</span>
                <span class="d-inline-block w-25">Editato: ${product.updatedAt}</span>
                
                `
                })
                .catch(error => console.error("Error:", error));
            }
        </script>
        </body>
    </html>